---
description: Tailwind v4 CSS-first config in pnpm monorepos consuming @vesta-cx/ui
globs:
  - "**/layout.css"
  - "**/app.css"
  - "**/app.html"
alwaysApply: false
---

# Tailwind v4 monorepo setup

When an app consumes `@vesta-cx/ui`, its main CSS file needs:

1. **`@import '@vesta-cx/ui/styles/theme.css'`** — Shared `@theme inline`, `@custom-variant`, `:root { --radius }`, and `@layer base` blocks. Do NOT duplicate these; import the canonical source from the UI package.

2. **`@source`** — Tell Tailwind to scan UI package source files for class usage:
   `@source "../../../../packages/ui/src/lib";` (relative from the CSS file)

3. **SCSS color tokens** — Import the compiled design tokens in the root layout Svelte file:
   `import '@vesta-cx/ui/styles/index.scss';`
   This requires `sass` as a devDependency. Also add `tw-animate-css` for animation utilities.

4. **`data-theme` attribute** — The SCSS color mixins are gated behind `[data-theme='light']`, `[data-theme='dark']`, `[data-theme='auto']`. Set `data-theme="auto"` on `<html>` in `app.html` or theme variables won't exist at runtime.

**Vite `server.fs.allow`** — In pnpm monorepos, SvelteKit's client runtime gets hoisted outside the app directory. Add the monorepo root to `server.fs.allow` in `vite.config.ts` to suppress the "outside of Vite serving allow list" warning.
